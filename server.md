## 服务端安装教程

服务端安装教程分三部分：

一、创建第一个版本

二、启动MiniHttpServer

三、创建第二第三个版本

### 创建第一个版本

1. 首先在任意位置新建一个文件夹，名字随意，用来存放服务端程序，我这里就叫mvserver
2. 将McVersioning.jar和MiniHttpServer.jar复制到mvserver目录，双击运行McVersioning.jar，启动后先最小化（命令行环境请使用`java -jar xxx.jar help`命令，xxx换成McVersioning.jar实际文件名）
3. 可以看到mvserver目录下新增了两个目录client和public
   1. client目录用来存放你要更新的文件，这里也是服主日常维护客户端文件的地方
   2. public目录用来存放你曾经创建的版本，以供给客户端下载。这个目录不要手动修改
4. 将服务端客户端的模组文件复制到mvserver/client/.minecraft/mods/目录下
   1. 注意并不需要复制所有的文件（这点有别于更新助手），你只需要复制你未来可能会更新的文件就好，如果你能非常确定某个模组文件一万年都不需要更新，那么这种文件你就不用复制过去了。当然，一些会自动下载/生成的文件（一般是模组的一些依赖库，某些模组启动时会自动下载，并不需要手动安装）也不需要复制过去。
   2. 这里仅仅拿.minecraft/mods/目录下的模组文件举例子，如果你有其它文件需要更新，也请同样按照上一条步骤进行操作，复制到你想要的路径上就好。请尽量在第一次配置的时候就把需要更新的文件都复制过去，如果忘了复制，后面再发新版本的时候，你是没办法删掉这些忘记加进client里面的文件的。
5. 复制好要更新的文件以后，回到McVersioning窗口，点击`扫描更改`按钮，可以看到下面已经显示你新增了一些文件（命令行环境请使用`java -jar xxx.jar status`命令，xxx换成McVersioning.jar实际文件名）
6. 点击`版本列表`按钮，在输入框里输入一个版本号比如`1.0`，然后点击`创建版本`按钮，就可以创建出第一个版本了。（版本号可以由任何文字组成，不一定要纯数字，但中文和空格除外！）（命令行环境请使用`java -jar xxx.jar record <new-version>`命令，xxx换成McVersioning.jar实际文件名，`<new-version>`换成你要创建的版本号）
7. 版本创建成功之后点击返回，可以看到窗口又显示"没有任何文件修改了"，意思是说client目录现在是干净的
8. 此时你已经发布了第一个版本。接着我们需要开启一个http服务器以供客户端检查更新

### 启动MiniHttpServer

> 如果你打算使用静态工具或者自己的服务端比如Apache或者Nginx，此章节可以跳过不看

1. 在MiniHttpServer.jar文件旁新建一个文本文件，改名为start.bat，把下面的代码复制进去然后保存

```
@echo off
for %%i in ("MiniHttpServer*.jar") do java -jar %%i
```

2. 双击启动这个刚创建的bat文件
3. 启动成功之后复制API地址后面的链接，粘贴到浏览器打开，如果一切顺利浏览器会显示1.0这个版本号
4. 然后MiniHttpServer的黑窗先不要关掉，后面配置客户端时会用到这个API地址后面配置
5. 到此，MiniHttpServer启动完毕
6. 接下来请前往客户端教程继续配置客户端程序，后面的教程"创建第二第三个版本"可以先不用看，等你需要用到的时候再回来查阅即可

### 创建第二第三个版本

有别于初次创建第一个版本，创建第二第三个版本要容易的多

1. 在给client目录更换新的文件或者进行修改之前，首先需要确认一下client目录是干净的，也就是client目录没有被改过的，因为你也不想在打新版本时，打进一些奇奇怪怪的东西进去对吧？

2. 双击运行McVersioning.jar程序，程序启动后会自动检查client目录的修改情况，如果你不放心，可以再手动点一次`扫描更改`来确认一遍（命令行环境请使用`java -jar xxx.jar status`命令，xxx换成McVersioning.jar实际文件名）

3. 理想情况下，client目录不应该有任何文件修改。如果要丢弃这些修改，可以点击`还原更改`按钮来使client目录恢复原状。请注意这个命令会丢弃你对client目录的一切更改，使用前请十分注意！（命令行环境请使用`java -jar xxx.jar revert`命令，xxx换成McVersioning.jar实际文件名）

4. 确保client目录是干净的以后，你就可以对client目录下的文件做替换了，该换新版的文件换新版，该修改的文件修改，该新增的新增，该删除的删除

5. 完成之后，点击`版本列表`然后重新打一个新的版本就完成了。这样，一个新的版本就创建好了

注意：版本号一旦发布就不能撤回了，因为撤回会导致文件状态混乱。你应该额外发布一个更新的版本来替代撤回以修补你的过错

## 一些使用提示

### 版本号并非判断新旧的依据

版本号不没有规定一定要往高迭代，也可以往低迭代，就是说你可以1.5版本更新到1.4版本，这都被允许的

因为版本的前后关系并不是直接判断版本号文字计算出来的，而是按照你打每个版本的时间顺序，后打的版本总是比先打的版本要新（存储在public/all-versions.txt里）版本号只是个标签罢了，不作为任何判断版本前后的依据
